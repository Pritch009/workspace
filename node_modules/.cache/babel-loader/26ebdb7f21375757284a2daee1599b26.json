{"ast":null,"code":"import { useState, useRef, useCallback, useEffect } from 'react';\nimport { useFloating, shift, getOverflowAncestors } from '@floating-ui/react';\nfunction useFloatingTooltip(_ref) {\n  let {\n    offset,\n    position\n  } = _ref;\n  const [opened, setOpened] = useState(false);\n  const boundaryRef = useRef();\n  const {\n    x,\n    y,\n    reference,\n    floating,\n    refs,\n    update,\n    placement\n  } = useFloating({\n    placement: position,\n    middleware: [shift({\n      crossAxis: true,\n      padding: 5,\n      rootBoundary: \"document\"\n    })]\n  });\n  const horizontalOffset = placement.includes(\"right\") ? offset : position.includes(\"left\") ? offset * -1 : 0;\n  const verticalOffset = placement.includes(\"bottom\") ? offset : position.includes(\"top\") ? offset * -1 : 0;\n  const handleMouseMove = useCallback(_ref2 => {\n    let {\n      clientX,\n      clientY\n    } = _ref2;\n    reference({\n      getBoundingClientRect() {\n        return {\n          width: 0,\n          height: 0,\n          x: clientX,\n          y: clientY,\n          left: clientX + horizontalOffset,\n          top: clientY + verticalOffset,\n          right: clientX,\n          bottom: clientY\n        };\n      }\n    });\n  }, [reference]);\n  useEffect(() => {\n    if (refs.floating.current) {\n      const boundary = boundaryRef.current;\n      boundary.addEventListener(\"mousemove\", handleMouseMove);\n      const parents = getOverflowAncestors(refs.floating.current);\n      parents.forEach(parent => {\n        parent.addEventListener(\"scroll\", update);\n      });\n      return () => {\n        boundary.removeEventListener(\"mousemove\", handleMouseMove);\n        parents.forEach(parent => {\n          parent.removeEventListener(\"scroll\", update);\n        });\n      };\n    }\n    return void 0;\n  }, [reference, refs.floating.current, update, handleMouseMove, opened]);\n  return {\n    handleMouseMove,\n    x,\n    y,\n    opened,\n    setOpened,\n    boundaryRef,\n    floating\n  };\n}\nexport { useFloatingTooltip };","map":{"version":3,"sources":["../../../src/Tooltip/TooltipFloating/use-floating-tooltip.ts"],"names":[],"mappings":";;AAEO,SAAS,kBAAkB,CAAA,IAAA,EAG/B;EAAA,IAHgC;IACjC,MAAM;IACN;EACF,CAAC,GAAA,IAAA;EACC,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,WAAW,GAAG,MAAM,CAAA,CAAE;EAC5B,MAAM;IAAE,CAAC;IAAE,CAAC;IAAE,SAAS;IAAE,QAAQ;IAAE,IAAI;IAAE,MAAM;IAAE;EAAS,CAAE,GAAG,WAAW,CAAC;IACzE,SAAS,EAAE,QAAQ;IACnB,UAAU,EAAE,CACV,KAAK,CAAC;MACJ,SAAS,EAAE,IAAI;MACf,OAAO,EAAE,CAAC;MACV,YAAY,EAAE;IACtB,CAAO,CAAC;EAER,CAAG,CAAC;EACF,MAAM,gBAAgB,GAAG,SAAS,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;EAC3G,MAAM,cAAc,GAAG,SAAS,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,MAAM,GAAG,QAAQ,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC;EACzG,MAAM,eAAe,GAAG,WAAW,CAAC,KAAA,IAA0B;IAAA,IAAzB;MAAE,OAAO;MAAE;IAAO,CAAE,GAAA,KAAA;IACvD,SAAS,CAAC;MACR,qBAAqB,CAAA,EAAG;QACtB,OAAO;UACL,KAAK,EAAE,CAAC;UACR,MAAM,EAAE,CAAC;UACT,CAAC,EAAE,OAAO;UACV,CAAC,EAAE,OAAO;UACV,IAAI,EAAE,OAAO,GAAG,gBAAgB;UAChC,GAAG,EAAE,OAAO,GAAG,cAAc;UAC7B,KAAK,EAAE,OAAO;UACd,MAAM,EAAE;QAClB,CAAS;MACT;IACA,CAAK,CAAC;EACN,CAAG,EAAE,CAAC,SAAS,CAAC,CAAC;EACf,SAAS,CAAC,MAAM;IACd,IAAI,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE;MACzB,MAAM,QAAQ,GAAG,WAAW,CAAC,OAAO;MACpC,QAAQ,CAAC,gBAAgB,CAAC,WAAW,EAAE,eAAe,CAAC;MACvD,MAAM,OAAO,GAAG,oBAAoB,CAAC,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC;MAC3D,OAAO,CAAC,OAAO,CAAE,MAAM,IAAK;QAC1B,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,MAAM,CAAC;MACjD,CAAO,CAAC;MACF,OAAO,MAAM;QACX,QAAQ,CAAC,mBAAmB,CAAC,WAAW,EAAE,eAAe,CAAC;QAC1D,OAAO,CAAC,OAAO,CAAE,MAAM,IAAK;UAC1B,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,MAAM,CAAC;QACtD,CAAS,CAAC;MACV,CAAO;IACP;IACI,OAAO,KAAK,CAAC;EACjB,CAAG,EAAE,CAAC,SAAS,EAAE,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,MAAM,EAAE,eAAe,EAAE,MAAM,CAAC,CAAC;EACvE,OAAO;IAAE,eAAe;IAAE,CAAC;IAAE,CAAC;IAAE,MAAM;IAAE,SAAS;IAAE,WAAW;IAAE;EAAQ,CAAE;AAC5E","sourcesContent":["import { useState, useEffect, useCallback, useRef } from 'react';\nimport { useFloating, shift, getOverflowAncestors } from '@floating-ui/react';\nimport { FloatingPosition } from '../../Floating';\n\ninterface UseFloatingTooltip {\n  offset: number;\n  position: FloatingPosition;\n}\n\nexport function useFloatingTooltip<T extends HTMLElement = any>({\n  offset,\n  position,\n}: UseFloatingTooltip) {\n  const [opened, setOpened] = useState(false);\n  const boundaryRef = useRef<T>();\n  const { x, y, reference, floating, refs, update, placement } = useFloating({\n    placement: position,\n    middleware: [\n      shift({\n        crossAxis: true,\n        padding: 5,\n        rootBoundary: 'document',\n      }),\n    ],\n  });\n\n  const horizontalOffset = placement.includes('right')\n    ? offset\n    : position.includes('left')\n    ? offset * -1\n    : 0;\n\n  const verticalOffset = placement.includes('bottom')\n    ? offset\n    : position.includes('top')\n    ? offset * -1\n    : 0;\n\n  const handleMouseMove = useCallback(\n    ({ clientX, clientY }: MouseEvent | React.MouseEvent<T, MouseEvent>) => {\n      reference({\n        getBoundingClientRect() {\n          return {\n            width: 0,\n            height: 0,\n            x: clientX,\n            y: clientY,\n            left: clientX + horizontalOffset,\n            top: clientY + verticalOffset,\n            right: clientX,\n            bottom: clientY,\n          };\n        },\n      });\n    },\n    [reference]\n  );\n\n  useEffect(() => {\n    if (refs.floating.current) {\n      const boundary = boundaryRef.current;\n      boundary.addEventListener('mousemove', handleMouseMove);\n\n      const parents = getOverflowAncestors(refs.floating.current);\n      parents.forEach((parent) => {\n        parent.addEventListener('scroll', update);\n      });\n\n      return () => {\n        boundary.removeEventListener('mousemove', handleMouseMove);\n        parents.forEach((parent) => {\n          parent.removeEventListener('scroll', update);\n        });\n      };\n    }\n\n    return undefined;\n  }, [reference, refs.floating.current, update, handleMouseMove, opened]);\n\n  return { handleMouseMove, x, y, opened, setOpened, boundaryRef, floating };\n}\n"]},"metadata":{},"sourceType":"module"}