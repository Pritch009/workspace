{"ast":null,"code":"import React, { forwardRef, useRef, useEffect } from 'react';\nimport { useUncontrolled } from '@mantine/hooks';\nimport useStyles from './FileInput.styles.js';\nimport { useInputProps } from '../Input/use-input-props.js';\nimport { CloseButton } from '../CloseButton/CloseButton.js';\nimport { Input } from '../Input/Input.js';\nimport { FileButton } from '../FileButton/FileButton.js';\nimport { Text } from '../Text/Text.js';\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\nconst DefaultValue = _ref => {\n  let {\n    value\n  } = _ref;\n  return /* @__PURE__ */React.createElement(Text, {\n    sx: {\n      overflow: \"hidden\",\n      textOverflow: \"ellipsis\",\n      whiteSpace: \"nowrap\"\n    }\n  }, Array.isArray(value) ? value.map(file => file.name).join(\", \") : value == null ? void 0 : value.name);\n};\nconst defaultProps = {\n  size: \"sm\",\n  valueComponent: DefaultValue\n};\nconst _FileInput = forwardRef((props, ref) => {\n  const _a = useInputProps(\"FileInput\", defaultProps, props),\n    {\n      inputProps,\n      wrapperProps,\n      placeholder,\n      value,\n      defaultValue,\n      onChange,\n      multiple,\n      accept,\n      name,\n      form,\n      classNames,\n      styles,\n      unstyled,\n      valueComponent: ValueComponent,\n      rightSection,\n      clearable,\n      clearButtonProps,\n      readOnly,\n      capture,\n      fileInputProps\n    } = _a,\n    others = __objRest(_a, [\"inputProps\", \"wrapperProps\", \"placeholder\", \"value\", \"defaultValue\", \"onChange\", \"multiple\", \"accept\", \"name\", \"form\", \"classNames\", \"styles\", \"unstyled\", \"valueComponent\", \"rightSection\", \"clearable\", \"clearButtonProps\", \"readOnly\", \"capture\", \"fileInputProps\"]);\n  const resetRef = useRef();\n  const {\n    classes,\n    cx\n  } = useStyles(null, {\n    name: \"FileInput\",\n    classNames,\n    styles,\n    unstyled\n  });\n  const [_value, setValue] = useUncontrolled({\n    value,\n    defaultValue,\n    onChange,\n    finalValue: multiple ? [] : null\n  });\n  const hasValue = Array.isArray(_value) ? _value.length !== 0 : _value !== null;\n  const _rightSection = rightSection || (clearable && hasValue && !readOnly ? /* @__PURE__ */React.createElement(CloseButton, __spreadProps(__spreadValues({}, clearButtonProps), {\n    variant: \"transparent\",\n    onClick: () => setValue(multiple ? [] : null),\n    size: inputProps.size,\n    unstyled\n  })) : null);\n  useEffect(() => {\n    if (Array.isArray(_value) && _value.length === 0 || _value === null) {\n      resetRef.current();\n    }\n  }, [_value]);\n  return /* @__PURE__ */React.createElement(Input.Wrapper, __spreadProps(__spreadValues({}, wrapperProps), {\n    __staticSelector: \"FileInput\"\n  }), /* @__PURE__ */React.createElement(FileButton, {\n    onChange: setValue,\n    multiple,\n    accept,\n    name,\n    form,\n    resetRef,\n    disabled: readOnly,\n    capture,\n    inputProps: fileInputProps\n  }, fileButtonProps => /* @__PURE__ */React.createElement(Input, __spreadProps(__spreadValues(__spreadValues(__spreadValues({\n    multiline: true\n  }, fileButtonProps), inputProps), others), {\n    component: \"button\",\n    type: \"button\",\n    ref,\n    __staticSelector: \"FileInput\",\n    rightSection: _rightSection,\n    classNames: __spreadProps(__spreadValues({}, classNames), {\n      input: cx(classes.input, classNames == null ? void 0 : classNames.input)\n    })\n  }), !hasValue ? /* @__PURE__ */React.createElement(Input.Placeholder, {\n    className: classes.placeholder\n  }, placeholder) : /* @__PURE__ */React.createElement(ValueComponent, {\n    value: _value\n  }))));\n});\n_FileInput.displayName = \"@mantine/core/FileInput\";\nconst FileInput = _FileInput;\nexport { FileInput, _FileInput };","map":{"version":3,"sources":["../../src/FileInput/FileInput.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { forwardRef, useEffect, useRef } from 'react';\nimport { DefaultProps, MantineSize, Selectors } from '@mantine/styles';\nimport { useUncontrolled } from '@mantine/hooks';\nimport {\n  Input,\n  InputSharedProps,\n  InputStylesNames,\n  useInputProps,\n  InputWrapperBaseProps,\n  InputWrapperStylesNames,\n} from '../Input';\nimport { Text } from '../Text';\nimport { CloseButton } from '../CloseButton';\nimport { FileButton } from '../FileButton';\nimport useStyles from './FileInput.styles';\n\nexport type FileInputStylesNames =\n  | InputStylesNames\n  | InputWrapperStylesNames\n  | Selectors<typeof useStyles>;\n\nexport interface FileInputProps<Multiple extends boolean = false>\n  extends DefaultProps<FileInputStylesNames>,\n    InputSharedProps,\n    InputWrapperBaseProps,\n    Omit<React.ComponentPropsWithoutRef<'button'>, 'size' | 'onChange' | 'value' | 'defaultValue'> {\n  /** Props passed to root element (InputWrapper component) */\n  wrapperProps?: Record<string, any>;\n\n  /** Called when user picks files */\n  onChange?(payload: Multiple extends true ? File[] : File | null): void;\n\n  /** Controlled input value */\n  value?: Multiple extends true ? File[] : File | null;\n\n  /** Uncontrolled input default value */\n  defaultValue?: Multiple extends true ? File[] : File | null;\n\n  /** Input size */\n  size?: MantineSize;\n\n  /** Determines whether user can pick more than one file */\n  multiple?: Multiple;\n\n  /** File input accept attribute, for example, \"image/png,image/jpeg\" */\n  accept?: string;\n\n  /** Input name attribute */\n  name?: string;\n\n  /** Input form attribute */\n  form?: string;\n\n  /** Current value renderer */\n  valueComponent?: React.FC<{ value: null | File | File[] }>;\n\n  /** Allow to clear value */\n  clearable?: boolean;\n\n  /** Props added to clear button */\n  clearButtonProps?: React.ComponentPropsWithoutRef<'button'>;\n\n  /** Determines whether the user can change value */\n  readOnly?: boolean;\n\n  /** Specifies that, optionally, a new file should be captured, and which device should be used to capture that new media of a type defined by the accept attribute. */\n  capture?: boolean | 'user' | 'environment';\n\n  /** Spreads props to input element used to capture files */\n  fileInputProps?: React.ComponentPropsWithoutRef<'input'>;\n}\n\nconst DefaultValue: FileInputProps['valueComponent'] = ({ value }) => (\n  <Text sx={{ overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\n    {Array.isArray(value) ? value.map((file) => file.name).join(', ') : value?.name}\n  </Text>\n);\n\nconst defaultProps: Partial<FileInputProps> = {\n  size: 'sm',\n  valueComponent: DefaultValue,\n};\n\nexport const _FileInput = forwardRef<HTMLButtonElement, FileInputProps>((props, ref) => {\n  const {\n    inputProps,\n    wrapperProps,\n    placeholder,\n    value,\n    defaultValue,\n    onChange,\n    multiple,\n    accept,\n    name,\n    form,\n    classNames,\n    styles,\n    unstyled,\n    valueComponent: ValueComponent,\n    rightSection,\n    clearable,\n    clearButtonProps,\n    readOnly,\n    capture,\n    fileInputProps,\n    ...others\n  } = useInputProps('FileInput', defaultProps, props);\n  const resetRef = useRef<() => void>();\n  const { classes, cx } = useStyles(null, {\n    name: 'FileInput',\n    classNames,\n    styles,\n    unstyled,\n  });\n\n  const [_value, setValue] = useUncontrolled<File | File[]>({\n    value,\n    defaultValue,\n    onChange,\n    finalValue: multiple ? [] : null,\n  });\n\n  const hasValue = Array.isArray(_value) ? _value.length !== 0 : _value !== null;\n\n  const _rightSection =\n    rightSection ||\n    (clearable && hasValue && !readOnly ? (\n      <CloseButton\n        {...clearButtonProps}\n        variant=\"transparent\"\n        onClick={() => setValue(multiple ? [] : null)}\n        size={inputProps.size}\n        unstyled={unstyled}\n      />\n    ) : null);\n\n  useEffect(() => {\n    if ((Array.isArray(_value) && _value.length === 0) || _value === null) {\n      resetRef.current();\n    }\n  }, [_value]);\n\n  return (\n    <Input.Wrapper {...wrapperProps} __staticSelector=\"FileInput\">\n      <FileButton\n        onChange={setValue}\n        multiple={multiple}\n        accept={accept}\n        name={name}\n        form={form}\n        resetRef={resetRef}\n        disabled={readOnly}\n        capture={capture}\n        inputProps={fileInputProps}\n      >\n        {(fileButtonProps) => (\n          <Input\n            multiline\n            {...fileButtonProps}\n            {...inputProps}\n            {...others}\n            component=\"button\"\n            type=\"button\"\n            ref={ref}\n            __staticSelector=\"FileInput\"\n            rightSection={_rightSection}\n            classNames={{ ...classNames, input: cx(classes.input, (classNames as any)?.input) }}\n          >\n            {!hasValue ? (\n              <Input.Placeholder className={classes.placeholder}>{placeholder}</Input.Placeholder>\n            ) : (\n              <ValueComponent value={_value} />\n            )}\n          </Input>\n        )}\n      </FileButton>\n    </Input.Wrapper>\n  );\n});\n\n_FileInput.displayName = '@mantine/core/FileInput';\n\ntype FileInputComponent = <Multiple extends boolean = false>(\n  props: FileInputProps<Multiple> & {\n    ref?: React.ForwardedRef<HTMLButtonElement>;\n  }\n) => JSX.Element;\n\nexport const FileInput: FileInputComponent = _FileInput as any;\n"]},"metadata":{},"sourceType":"module"}