{"ast":null,"code":"var _jsxFileName = \"/Users/will/WebstormProjects/workspace/src/components/searchBar.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { BsSearchHeart } from \"react-icons/bs\";\nimport { Box, Input, rem, Title, Text, Alert } from \"@mantine/core\";\nimport { useBreeds } from \"../APIs/cats\";\nimport Fuse from \"fuse.js\";\nimport { useClickOutside } from \"@mantine/hooks\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst fuseOptions = {\n  includeScore: true,\n  keys: [\"name\", \"origin\"]\n};\nexport function SearchBar(_ref) {\n  _s();\n  let {\n    onSelect,\n    selected\n  } = _ref;\n  const {\n    data: breeds,\n    loading: loadingBreeds,\n    error\n  } = useBreeds();\n  const [err, setErr] = useState(null);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [suggestions, setSuggestions] = useState([]);\n  const [focused, setFocused] = useState(false);\n  const ref = useClickOutside(() => {\n    setFocused(false);\n  });\n  const onChange = event => {\n    setSearchValue(event.currentTarget.value);\n    if (!focused) setFocused(true);\n  };\n  const onSelectOption = suggestion => {\n    setSuggestions([]);\n    onSelect(suggestion);\n    setSearchValue(suggestion.name);\n    setFocused(false);\n  };\n  const onFocus = () => {\n    setFocused(true);\n  };\n  useEffect(() => {\n    if (focused && breeds && (breeds === null || breeds === void 0 ? void 0 : breeds.length) > 0) {\n      const fuse = new Fuse(breeds, fuseOptions);\n      let results = fuse.search(searchValue);\n      setSuggestions(results.filter(_ref2 => {\n        let {\n          score\n        } = _ref2;\n        return score < 0.3;\n      }));\n    }\n  }, [focused, breeds, searchValue]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      position: \"relative\",\n      width: \"100%\"\n    },\n    children: [error && /*#__PURE__*/_jsxDEV(Alert, {\n      title: \"Error!\",\n      children: error.response.statusText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this), err && /*#__PURE__*/_jsxDEV(Alert, {\n      title: \"Error!\",\n      children: JSON.stringify(err)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }, this), loadingBreeds && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }, this), !loadingBreeds && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        onFocus: onFocus,\n        icon: /*#__PURE__*/_jsxDEV(BsSearchHeart, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 19\n        }, this),\n        value: searchValue,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }, this), focused && /*#__PURE__*/_jsxDEV(Box, {\n        ref: ref,\n        sx: {\n          position: \"absolute\",\n          top: \"100%\",\n          left: 0,\n          width: \"100%\",\n          background: \"red\",\n          \"&:empty\": {\n            display: \"none\"\n          }\n        },\n        children: suggestions.map((_ref3, index) => {\n          let {\n            item: suggestion\n          } = _ref3;\n          return /*#__PURE__*/_jsxDEV(SearchOption, {\n            index: index,\n            onSelect: () => onSelectOption(suggestion),\n            children: suggestion.name\n          }, suggestion.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\n_s(SearchBar, \"iy2IVvvfVycdy2Cu2q0MT4vlIWg=\", false, function () {\n  return [useBreeds, useClickOutside];\n});\n_c = SearchBar;\nfunction SearchOption(_ref4) {\n  let {\n    children,\n    index,\n    onSelect,\n    ...props\n  } = _ref4;\n  const onKeyDown = _ref5 => {\n    let {\n      key\n    } = _ref5;\n    switch (key) {\n      case \"Enter\":\n        onSelect();\n        break;\n      default:\n        break;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Box, {\n    ...props,\n    tabIndex: 0,\n    onClick: onSelect,\n    onKeyDown: onKeyDown,\n    sx: {\n      display: \"flex\",\n      padding: rem(8)\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n}\n_c2 = SearchOption;\nvar _c, _c2;\n$RefreshReg$(_c, \"SearchBar\");\n$RefreshReg$(_c2, \"SearchOption\");","map":{"version":3,"names":["useEffect","useState","BsSearchHeart","Box","Input","rem","Title","Text","Alert","useBreeds","Fuse","useClickOutside","jsxDEV","_jsxDEV","Fragment","_Fragment","fuseOptions","includeScore","keys","SearchBar","_ref","_s","onSelect","selected","data","breeds","loading","loadingBreeds","error","err","setErr","searchValue","setSearchValue","suggestions","setSuggestions","focused","setFocused","ref","onChange","event","currentTarget","value","onSelectOption","suggestion","name","onFocus","length","fuse","results","search","filter","_ref2","score","sx","position","width","children","title","response","statusText","fileName","_jsxFileName","lineNumber","columnNumber","JSON","stringify","icon","top","left","background","display","map","_ref3","index","item","SearchOption","id","_c","_ref4","props","onKeyDown","_ref5","key","tabIndex","onClick","padding","_c2","$RefreshReg$"],"sources":["/Users/will/WebstormProjects/workspace/src/components/searchBar.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { BsSearchHeart } from \"react-icons/bs\";\nimport { Box, Input, rem, Title, Text, Alert } from \"@mantine/core\";\nimport { useBreeds } from \"../APIs/cats\";\nimport Fuse from \"fuse.js\";\nimport { useClickOutside } from \"@mantine/hooks\";\n\nconst fuseOptions = {\n  includeScore: true,\n  keys: [\"name\", \"origin\"],\n};\n\nexport function SearchBar({ onSelect, selected }) {\n  const { data: breeds, loading: loadingBreeds, error } = useBreeds();\n  const [err, setErr] = useState(null);\n  const [searchValue, setSearchValue] = useState(\"\");\n  const [suggestions, setSuggestions] = useState([]);\n  const [focused, setFocused] = useState(false);\n  const ref = useClickOutside(() => {\n    setFocused(false);\n  });\n\n  const onChange = (event) => {\n    setSearchValue(event.currentTarget.value);\n    if (!focused) setFocused(true);\n  };\n\n  const onSelectOption = (suggestion) => {\n    setSuggestions([]);\n    onSelect(suggestion);\n    setSearchValue(suggestion.name);\n    setFocused(false);\n  };\n\n  const onFocus = () => {\n    setFocused(true);\n  };\n\n  useEffect(() => {\n    if (focused && breeds && breeds?.length > 0) {\n      const fuse = new Fuse(breeds, fuseOptions);\n      let results = fuse.search(searchValue);\n      setSuggestions(results.filter(({ score }) => score < 0.3));\n    }\n  }, [focused, breeds, searchValue]);\n\n  return (\n    <Box\n      sx={{\n        position: \"relative\",\n        width: \"100%\",\n      }}\n    >\n      {error && <Alert title=\"Error!\">{error.response.statusText}</Alert>}\n      {err && <Alert title=\"Error!\">{JSON.stringify(err)}</Alert>}\n      {loadingBreeds && <div>Loading</div>}\n      {!loadingBreeds && (\n        <>\n          <Input\n            onFocus={onFocus}\n            icon={<BsSearchHeart />}\n            value={searchValue}\n            onChange={onChange}\n          />\n          {focused && (\n            <Box\n              ref={ref}\n              sx={{\n                position: \"absolute\",\n                top: \"100%\",\n                left: 0,\n                width: \"100%\",\n                background: \"red\",\n                \"&:empty\": {\n                  display: \"none\",\n                },\n              }}\n            >\n              {suggestions.map(({ item: suggestion }, index) => (\n                <SearchOption\n                  key={suggestion.id}\n                  index={index}\n                  onSelect={() => onSelectOption(suggestion)}\n                >\n                  {suggestion.name}\n                </SearchOption>\n              ))}\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  );\n}\n\nfunction SearchOption({ children, index, onSelect, ...props }) {\n  const onKeyDown = ({ key }) => {\n    switch (key) {\n      case \"Enter\":\n        onSelect();\n        break;\n      default:\n        break;\n    }\n  };\n  return (\n    <Box\n      {...props}\n      tabIndex={0}\n      onClick={onSelect}\n      onKeyDown={onKeyDown}\n      sx={{\n        display: \"flex\",\n        padding: rem(8),\n      }}\n    >\n      {children}\n    </Box>\n  );\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,GAAG,EAAEC,KAAK,EAAEC,GAAG,EAAEC,KAAK,EAAEC,IAAI,EAAEC,KAAK,QAAQ,eAAe;AACnE,SAASC,SAAS,QAAQ,cAAc;AACxC,OAAOC,IAAI,MAAM,SAAS;AAC1B,SAASC,eAAe,QAAQ,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAEjD,MAAMC,WAAW,GAAG;EAClBC,YAAY,EAAE,IAAI;EAClBC,IAAI,EAAE,CAAC,MAAM,EAAE,QAAQ;AACzB,CAAC;AAED,OAAO,SAASC,SAASA,CAAAC,IAAA,EAAyB;EAAAC,EAAA;EAAA,IAAxB;IAAEC,QAAQ;IAAEC;EAAS,CAAC,GAAAH,IAAA;EAC9C,MAAM;IAAEI,IAAI,EAAEC,MAAM;IAAEC,OAAO,EAAEC,aAAa;IAAEC;EAAM,CAAC,GAAGnB,SAAS,CAAC,CAAC;EACnE,MAAM,CAACoB,GAAG,EAAEC,MAAM,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;EACpC,MAAM,CAAC8B,WAAW,EAAEC,cAAc,CAAC,GAAG/B,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACgC,WAAW,EAAEC,cAAc,CAAC,GAAGjC,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM,CAACkC,OAAO,EAAEC,UAAU,CAAC,GAAGnC,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAMoC,GAAG,GAAG1B,eAAe,CAAC,MAAM;IAChCyB,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC,CAAC;EAEF,MAAME,QAAQ,GAAIC,KAAK,IAAK;IAC1BP,cAAc,CAACO,KAAK,CAACC,aAAa,CAACC,KAAK,CAAC;IACzC,IAAI,CAACN,OAAO,EAAEC,UAAU,CAAC,IAAI,CAAC;EAChC,CAAC;EAED,MAAMM,cAAc,GAAIC,UAAU,IAAK;IACrCT,cAAc,CAAC,EAAE,CAAC;IAClBZ,QAAQ,CAACqB,UAAU,CAAC;IACpBX,cAAc,CAACW,UAAU,CAACC,IAAI,CAAC;IAC/BR,UAAU,CAAC,KAAK,CAAC;EACnB,CAAC;EAED,MAAMS,OAAO,GAAGA,CAAA,KAAM;IACpBT,UAAU,CAAC,IAAI,CAAC;EAClB,CAAC;EAEDpC,SAAS,CAAC,MAAM;IACd,IAAImC,OAAO,IAAIV,MAAM,IAAI,CAAAA,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEqB,MAAM,IAAG,CAAC,EAAE;MAC3C,MAAMC,IAAI,GAAG,IAAIrC,IAAI,CAACe,MAAM,EAAET,WAAW,CAAC;MAC1C,IAAIgC,OAAO,GAAGD,IAAI,CAACE,MAAM,CAAClB,WAAW,CAAC;MACtCG,cAAc,CAACc,OAAO,CAACE,MAAM,CAACC,KAAA;QAAA,IAAC;UAAEC;QAAM,CAAC,GAAAD,KAAA;QAAA,OAAKC,KAAK,GAAG,GAAG;MAAA,EAAC,CAAC;IAC5D;EACF,CAAC,EAAE,CAACjB,OAAO,EAAEV,MAAM,EAAEM,WAAW,CAAC,CAAC;EAElC,oBACElB,OAAA,CAACV,GAAG;IACFkD,EAAE,EAAE;MACFC,QAAQ,EAAE,UAAU;MACpBC,KAAK,EAAE;IACT,CAAE;IAAAC,QAAA,GAED5B,KAAK,iBAAIf,OAAA,CAACL,KAAK;MAACiD,KAAK,EAAC,QAAQ;MAAAD,QAAA,EAAE5B,KAAK,CAAC8B,QAAQ,CAACC;IAAU;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAClElC,GAAG,iBAAIhB,OAAA,CAACL,KAAK;MAACiD,KAAK,EAAC,QAAQ;MAAAD,QAAA,EAAEQ,IAAI,CAACC,SAAS,CAACpC,GAAG;IAAC;MAAA+B,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAC1DpC,aAAa,iBAAId,OAAA;MAAA2C,QAAA,EAAK;IAAO;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CAAC,EACnC,CAACpC,aAAa,iBACbd,OAAA,CAAAE,SAAA;MAAAyC,QAAA,gBACE3C,OAAA,CAACT,KAAK;QACJyC,OAAO,EAAEA,OAAQ;QACjBqB,IAAI,eAAErD,OAAA,CAACX,aAAa;UAAA0D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAE;QACxBtB,KAAK,EAAEV,WAAY;QACnBO,QAAQ,EAAEA;MAAS;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACpB,CAAC,EACD5B,OAAO,iBACNtB,OAAA,CAACV,GAAG;QACFkC,GAAG,EAAEA,GAAI;QACTgB,EAAE,EAAE;UACFC,QAAQ,EAAE,UAAU;UACpBa,GAAG,EAAE,MAAM;UACXC,IAAI,EAAE,CAAC;UACPb,KAAK,EAAE,MAAM;UACbc,UAAU,EAAE,KAAK;UACjB,SAAS,EAAE;YACTC,OAAO,EAAE;UACX;QACF,CAAE;QAAAd,QAAA,EAEDvB,WAAW,CAACsC,GAAG,CAAC,CAAAC,KAAA,EAAuBC,KAAK;UAAA,IAA3B;YAAEC,IAAI,EAAE/B;UAAW,CAAC,GAAA6B,KAAA;UAAA,oBACpC3D,OAAA,CAAC8D,YAAY;YAEXF,KAAK,EAAEA,KAAM;YACbnD,QAAQ,EAAEA,CAAA,KAAMoB,cAAc,CAACC,UAAU,CAAE;YAAAa,QAAA,EAE1Cb,UAAU,CAACC;UAAI,GAJXD,UAAU,CAACiC,EAAE;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAKN,CAAC;QAAA,CAChB;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACC,CACN;IAAA,eACD,CACH;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE,CAAC;AAEV;AAAC1C,EAAA,CAjFeF,SAAS;EAAA,QACiCV,SAAS,EAKrDE,eAAe;AAAA;AAAAkE,EAAA,GANb1D,SAAS;AAmFzB,SAASwD,YAAYA,CAAAG,KAAA,EAA0C;EAAA,IAAzC;IAAEtB,QAAQ;IAAEiB,KAAK;IAAEnD,QAAQ;IAAE,GAAGyD;EAAM,CAAC,GAAAD,KAAA;EAC3D,MAAME,SAAS,GAAGC,KAAA,IAAa;IAAA,IAAZ;MAAEC;IAAI,CAAC,GAAAD,KAAA;IACxB,QAAQC,GAAG;MACT,KAAK,OAAO;QACV5D,QAAQ,CAAC,CAAC;QACV;MACF;QACE;IACJ;EACF,CAAC;EACD,oBACET,OAAA,CAACV,GAAG;IAAA,GACE4E,KAAK;IACTI,QAAQ,EAAE,CAAE;IACZC,OAAO,EAAE9D,QAAS;IAClB0D,SAAS,EAAEA,SAAU;IACrB3B,EAAE,EAAE;MACFiB,OAAO,EAAE,MAAM;MACfe,OAAO,EAAEhF,GAAG,CAAC,CAAC;IAChB,CAAE;IAAAmD,QAAA,EAEDA;EAAQ;IAAAI,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEV;AAACuB,GAAA,GAxBQX,YAAY;AAAA,IAAAE,EAAA,EAAAS,GAAA;AAAAC,YAAA,CAAAV,EAAA;AAAAU,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module"}